{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { getBase644, beforeUpload4 } from \"../utils/index\";\nimport UseHome from \"../UseForm/UseHome\";\nimport axios from \"axios\";\n\nconst UsePostPublic = () => {\n  _s();\n\n  //States of Modal\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true); //States\n\n\n  const {\n    proveedor,\n    usuario,\n    setPublicacionActual,\n    publicacionActual\n  } = UseHome();\n  const [base64, setBase64] = useState(\"\");\n  const [input, setInput] = useState({});\n  const [validation, setValidation] = useState(false);\n  const token = localStorage.getItem(\"token\"); //Funcions\n\n  const HandleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    const changedInput = { ...input,\n      [name]: value,\n      proveedor: proveedor,\n      perfil: usuario.imagen\n    };\n    setInput(changedInput);\n  }; //Codigo para foto base 64\n\n\n  const onChangeImg = async e => {\n    const img = e.target.files[0];\n    const base64img = await getBase644(img);\n    const pack = { ...input,\n      imagenPublicada: base64img\n    };\n    setBase64(base64img);\n    setInput(pack);\n  };\n\n  const HandleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      console.log(base64);\n      const headers = {\n        \"x-auth-token\": token\n      };\n      await axios.post(\"publicacion\", input, {\n        headers\n      });\n      setPublicacionActual(true);\n    } catch (error) {\n      console.log(error);\n      setValidation(true);\n    }\n  };\n\n  const onInputClick = event => {\n    event.target.value = \"\";\n  };\n\n  return {\n    publicacionActual,\n    onInputClick,\n    HandleChange,\n    HandleSubmit,\n    handleClose,\n    onChangeImg,\n    handleShow,\n    validation,\n    base64,\n    input,\n    show\n  };\n};\n\n_s(UsePostPublic, \"63cGPjBvkM6PJSicwcXVW2on87g=\");\n\n_c = UsePostPublic;\nexport default UsePostPublic;\n\nvar _c;\n\n$RefreshReg$(_c, \"UsePostPublic\");","map":{"version":3,"sources":["/home/conteo/Documentos/Full Stack/Andromeda/client/src/UseForm/UsePostPublic.js"],"names":["useState","useEffect","getBase644","beforeUpload4","UseHome","axios","UsePostPublic","show","setShow","handleClose","handleShow","proveedor","usuario","setPublicacionActual","publicacionActual","base64","setBase64","input","setInput","validation","setValidation","token","localStorage","getItem","HandleChange","e","name","value","target","changedInput","perfil","imagen","onChangeImg","img","files","base64img","pack","imagenPublicada","HandleSubmit","preventDefault","console","log","headers","post","error","onInputClick","event"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getBase644, beforeUpload4 } from \"../utils/index\";\nimport UseHome from \"../UseForm/UseHome\";\nimport axios from \"axios\";\n\nconst UsePostPublic = () => {\n  //States of Modal\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  //States\n  const { proveedor, usuario, setPublicacionActual, publicacionActual } =\n    UseHome();\n  const [base64, setBase64] = useState(\"\");\n  const [input, setInput] = useState({});\n  const [validation, setValidation] = useState(false);\n  const token = localStorage.getItem(\"token\");\n\n  //Funcions\n  const HandleChange = (e) => {\n    const { name, value } = e.target;\n    const changedInput = {\n      ...input,\n      [name]: value,\n      proveedor: proveedor,\n      perfil: usuario.imagen,\n    };\n    setInput(changedInput);\n  };\n\n  //Codigo para foto base 64\n  const onChangeImg = async (e) => {\n    const img = e.target.files[0];\n    const base64img = await getBase644(img);\n    const pack = { ...input, imagenPublicada: base64img };\n    setBase64(base64img);\n    setInput(pack);\n  };\n\n  const HandleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      console.log(base64)\n      const headers = { \"x-auth-token\": token };\n      await axios.post(\"publicacion\", input, { headers });\n      setPublicacionActual(true);\n    } catch (error) {\n      console.log(error);\n      setValidation(true);\n    }\n  };\n  const onInputClick = (event) => {\n    event.target.value = \"\";\n  };\n  return {\n    publicacionActual,\n    onInputClick,\n    HandleChange,\n    HandleSubmit,\n    handleClose,\n    onChangeImg,\n    handleShow,\n    validation,\n    base64,\n    input,\n    show,\n  };\n};\nexport default UsePostPublic;\n"]},"metadata":{},"sourceType":"module"}